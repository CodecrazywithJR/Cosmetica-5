(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{6964:function(e,t,n){Promise.resolve().then(n.bind(n,4923))},4923:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(7437),s=n(2778);function a(e){let{isLoading:t,error:n,isEmpty:s=!1,emptyMessage:a="No data available",emptyDescription:l,emptyAction:r,loadingMessage:d="Loading...",errorTitle:c,errorDescription:o,errorMessage:p,children:h}=e;return t?(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:(0,i.jsx)("div",{style:{fontSize:"16px",color:"var(--gray-600)"},children:d})})}):n?(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"⚠️"}),(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px",color:"var(--error)"},children:c||p||"Error"}),o&&(0,i.jsx)("p",{style:{color:"var(--gray-600)",fontSize:"14px",maxWidth:"400px",margin:"0 auto"},children:o})]})}):s?(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"\uD83D\uDCCB"}),(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px"},children:a}),l&&(0,i.jsx)("p",{style:{color:"var(--gray-600)",marginBottom:"24px",fontSize:"14px"},children:l}),r&&(0,i.jsx)("button",{onClick:r.onClick,className:"btn-primary",disabled:!r.onClick,children:r.label})]})}):(0,i.jsx)(i.Fragment,{children:h})}var l=n(1713),r=n(9827),d=n(1770),c=n(3227),o=n(1290);let p={all:["appointments"],lists:()=>[...p.all,"list"],list:e=>[...p.lists(),e],details:()=>[...p.all,"detail"],detail:e=>[...p.details(),e]};var h=n(2265),u=n(2586);function x(){var e;let t=(0,u.useTranslations)("agenda"),n=(0,u.useTranslations)("common"),x=(0,u.useLocale)(),[m,j]=(0,h.useState)(new Date().toISOString().split("T")[0]),[y,g]=(0,h.useState)(""),{data:v,isLoading:b,error:f}=(e={date:m,status:y||void 0},(0,l.a)({queryKey:p.list(e||{}),queryFn:async()=>(await c.ZP.get(o.q.CLINICAL.APPOINTMENTS,{params:e})).data})),N=function(){let e=(0,r.NL)();return(0,d.D)({mutationFn:async e=>{let{id:t,status:n}=e;return(await c.ZP.patch("".concat(o.q.CLINICAL.APPOINTMENTS).concat(t,"/"),{status:n})).data},onSuccess:(t,n)=>{e.invalidateQueries({queryKey:p.lists()}),e.invalidateQueries({queryKey:p.detail(n.id)})}})}(),S=(0,h.useMemo)(()=>{if(f||b)return(null==v?void 0:v.results)||[];let e=(null==v?void 0:v.results)||[];return e.length,e},[v,f,b,m]),C=0===S.length,k=(e,t)=>{N.mutate({id:e,status:t})};(0,h.useMemo)(()=>new Intl.DateTimeFormat(x,{year:"numeric",month:"long",day:"numeric"}),[x]);let _=(0,h.useMemo)(()=>new Intl.DateTimeFormat(x,{hour:"2-digit",minute:"2-digit"}),[x]);return(0,i.jsx)(s.Z,{children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"page-header",children:[(0,i.jsx)("h1",{children:t("title")}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{type:"date",value:m,onChange:e=>j(e.target.value),className:"form-group",style:{marginBottom:0,width:"auto",padding:"8px 12px"},"aria-label":t("filters.date")}),(0,i.jsxs)("select",{value:y,onChange:e=>g(e.target.value),style:{padding:"8px 12px",border:"1px solid var(--gray-300)",borderRadius:"6px"},"aria-label":t("filters.status"),children:[(0,i.jsx)("option",{value:"",children:t("filters.allStatuses")}),(0,i.jsx)("option",{value:"scheduled",children:t("appointment.status.scheduled")}),(0,i.jsx)("option",{value:"confirmed",children:t("appointment.status.confirmed")}),(0,i.jsx)("option",{value:"checked_in",children:t("appointment.status.checked_in")}),(0,i.jsx)("option",{value:"completed",children:t("appointment.status.completed")}),(0,i.jsx)("option",{value:"cancelled",children:t("appointment.status.cancelled")}),(0,i.jsx)("option",{value:"no_show",children:t("appointment.status.no_show")})]})]})]}),(0,i.jsxs)(a,{isLoading:b,error:f,isEmpty:C,emptyMessage:t("emptyState.title"),emptyDescription:t("emptyState.description"),emptyAction:{label:t("emptyState.action"),onClick:void 0},loadingMessage:n("loading"),errorTitle:t("errors.title"),errorDescription:t("errors.description"),children:[(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:t("table.time")}),(0,i.jsx)("th",{children:t("table.patient")}),(0,i.jsx)("th",{children:t("table.practitioner")}),(0,i.jsx)("th",{children:t("table.type")}),(0,i.jsx)("th",{children:t("table.status")}),(0,i.jsx)("th",{children:t("table.actions")})]})}),(0,i.jsx)("tbody",{children:S.map(e=>{var n;return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("div",{style:{fontWeight:500},children:_.format(new Date(e.scheduled_start))}),e.scheduled_end&&(0,i.jsx)("div",{style:{fontSize:"12px",color:"var(--gray-600)"},children:_.format(new Date(e.scheduled_end))})]}),(0,i.jsxs)("td",{children:[(0,i.jsx)("div",{style:{fontWeight:500},children:e.patient.full_name}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"var(--gray-600)"},children:e.patient.email||e.patient.phone||"—"})]}),(0,i.jsx)("td",{children:(null===(n=e.practitioner)||void 0===n?void 0:n.display_name)||"—"}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{style:{fontSize:"13px",color:"var(--gray-700)"},children:e.source})}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"badge badge-".concat(e.status),children:t("appointment.status.".concat(e.status))})}),(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"flex gap-2",children:["scheduled"===e.status&&(0,i.jsx)("button",{onClick:()=>k(e.id,"confirmed"),className:"btn-secondary btn-sm",disabled:N.isPending,children:t("actions.confirm")}),"confirmed"===e.status&&(0,i.jsx)("button",{onClick:()=>k(e.id,"checked_in"),className:"btn-primary btn-sm",disabled:N.isPending,children:t("actions.checkIn")}),"checked_in"===e.status&&(0,i.jsx)("button",{onClick:()=>k(e.id,"completed"),className:"btn-primary btn-sm",disabled:N.isPending,children:t("actions.complete")}),("scheduled"===e.status||"confirmed"===e.status)&&(0,i.jsx)("button",{onClick:()=>k(e.id,"cancelled"),className:"btn-secondary btn-sm",disabled:N.isPending,style:{color:"var(--error)"},children:t("actions.cancel")})]})})]},e.id)})})]})}),S.length>0&&(0,i.jsxs)("div",{style:{marginTop:"16px",fontSize:"14px",color:"var(--gray-600)"},children:[t("summary.totalAppointments"),": ",S.length]})]})]})})}}},function(e){e.O(0,[618,586,954,364,778,971,117,744],function(){return e(e.s=6964)}),_N_E=e.O()}]);