(()=>{var e={};e.id=355,e.ids=[355],e.modules={7713:(e,t,s)=>{var r={"./en.json":[9316,316],"./es.json":[5671,671],"./fr.json":[7913,913],"./hy.json":[1028,28],"./ru.json":[375,375],"./uk.json":[7306,306]};function a(e){if(!s.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],a=t[0];return s.e(t[1]).then(()=>s.t(a,19))}a.keys=()=>Object.keys(r),a.id=7713,e.exports=a},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4603:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(4613),s(4223),s(5866);var r=s(3191),a=s(8716),n=s(7922),i=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["[locale]",{children:["social",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4613)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/social/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4223)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/social/page.tsx"],p="/[locale]/social/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[locale]/social/page",pathname:"/[locale]/social",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3629:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},234:(e,t,s)=>{Promise.resolve().then(s.bind(s,3170)),Promise.resolve().then(s.bind(s,3185))},1686:(e,t,s)=>{Promise.resolve().then(s.bind(s,7700))},7700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(326),a=s(7577),n=s(3844),i=s(3002);async function o(){return(await i.ZP.get("/social/posts/")).data}async function l(e){return(await i.ZP.post(`/social/posts/${e}/generate-pack/`)).data}async function c(e){return(await i.ZP.get(`/social/posts/${e}/download-pack/`,{responseType:"blob"})).data}function d(){(0,n.useTranslations)();let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,p]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),h=async()=>{try{i(!0);let e=await o();t(e)}catch(e){console.error("Error loading posts:",e),p(e.response?.data?.detail||"Failed to load posts")}finally{i(!1)}},x=async e=>{try{m(e);let t=await l(e);alert(`Pack generation started! Task ID: ${t.task_id}`),await h()}catch(e){console.error("Error generating pack:",e),alert(e.response?.data?.error||"Failed to generate pack")}finally{m(null)}},g=async e=>{try{let t=await c(e),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`instagram_pack_${e}.zip`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){console.error("Error downloading pack:",e),alert(e.response?.data?.error||"Failed to download pack")}},b=e=>{let t="px-3 py-1 rounded-full text-xs font-semibold";switch(e){case"draft":default:return`${t} bg-gray-100 text-gray-800`;case"ready":return`${t} bg-blue-100 text-blue-800`;case"published":return`${t} bg-green-100 text-green-800`;case"archived":return`${t} bg-yellow-100 text-yellow-800`}};return s?r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Instagram Management"}),r.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:r.jsx("p",{className:"text-gray-600",children:"Loading posts..."})})]})}):d?r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Instagram Management"}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsx("p",{className:"text-red-800 font-semibold",children:"Error loading posts"}),r.jsx("p",{className:"text-red-600 mt-2",children:d})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Instagram Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manual Publish Pack Workflow"})]}),r.jsx("a",{href:"/admin/social/instagrampost/add/",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Create New Post"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"\uD83D\uDCF1 Manual Publish Workflow"}),(0,r.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Create post in Django Admin with caption and media from marketing bucket"}),r.jsx("li",{children:"Generate publish pack (ZIP file)"}),r.jsx("li",{children:"Download ZIP and extract files"}),r.jsx("li",{children:"Open Instagram app on your phone"}),r.jsx("li",{children:"Create new post with images from ZIP"}),r.jsx("li",{children:"Copy caption from caption.txt"}),r.jsx("li",{children:"Publish on Instagram"}),r.jsx("li",{children:"Mark post as published in admin with Instagram URL"})]})]}),0===e.length?r.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:r.jsx("p",{className:"text-gray-600",children:"No posts yet. Create your first post in Django Admin."})}):r.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"flex justify-between items-start mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Post #",e.id]}),r.jsx("span",{className:b(e.status),children:e.status}),r.jsx("span",{className:"text-sm text-gray-500",children:e.language.toUpperCase()})]}),(0,r.jsxs)("p",{className:"text-gray-700 mb-2",children:[e.caption.substring(0,150),e.caption.length>150?"...":""]}),e.hashtags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.hashtags.map((e,t)=>(0,r.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["#",e]},t))}),(0,r.jsxs)("div",{className:"flex gap-4 text-sm text-gray-600 mt-3",children:[(0,r.jsxs)("span",{children:["\uD83D\uDCF8 ",e.media_count," media"]}),(0,r.jsxs)("span",{children:["\uD83D\uDC64 ",e.created_by_username]}),(0,r.jsxs)("span",{children:["\uD83D\uDCC5 ",new Date(e.created_at).toLocaleDateString()]}),e.published_at&&(0,r.jsxs)("span",{children:["✅ Published ",new Date(e.published_at).toLocaleDateString()]})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 mt-4 pt-4 border-t",children:[e.can_generate_pack&&r.jsx("button",{onClick:()=>x(e.id),disabled:u===e.id,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:u===e.id?"Generating...":"\uD83D\uDCE6 Generate Pack"}),e.pack_file_path&&r.jsx("button",{onClick:()=>g(e.id),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"⬇️ Download Pack"}),r.jsx("a",{href:`/admin/social/instagrampost/${e.id}/change/`,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"✏️ Edit"}),e.instagram_url&&r.jsx("a",{href:e.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:"\uD83D\uDCF1 View on Instagram"})]}),e.pack_generated_at&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded text-sm",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Pack generated: ",new Date(e.pack_generated_at).toLocaleString()]})})]},e.id))})]})})}},3002:(e,t,s)=>{"use strict";s.d(t,{ZP:()=>n});var r=s(4464);s(5154);let a=r.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},timeout:3e4});a.interceptors.request.use(e=>e,e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{let t=e.config;return e.response?.status===401&&t._retry,Promise.reject(e)});let n=a},5154:(e,t,s)=>{"use strict";s.d(t,{q:()=>r});let r={AUTH:{TOKEN:"/api/auth/token/",REFRESH:"/api/auth/token/refresh/",ME:"/api/auth/me/"},CLINICAL:{APPOINTMENTS:"/api/v1/clinical/appointments/",PATIENTS:"/api/v1/clinical/patients/",ENCOUNTERS:"/api/v1/clinical/encounters/",TREATMENTS:"/api/v1/clinical/treatments/",PROPOSALS:"/api/v1/clinical/proposals/"},POS:{SALES:"/api/v1/pos/sales/"}}},8853:(e,t,s)=>{"use strict";s.d(t,{Ho:()=>c,K$:()=>u,aC:()=>d,p5:()=>p});var r=s(326),a=s(7577),n=s(5047),i=s(3002),o=s(5154);let l=(0,a.createContext)(void 0);function c({children:e}){let[t,s]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),p=(0,n.useRouter)(),u=async(e,t)=>{try{let{access:r,refresh:a}=(await i.ZP.post(o.q.AUTH.TOKEN,{email:e,password:t})).data;if(!r||!a)throw Error("Invalid token response from server");localStorage.setItem("access_token",r),localStorage.setItem("refresh_token",a);let n=(await i.ZP.get(o.q.AUTH.ME)).data;localStorage.setItem("user",JSON.stringify(n)),s(n)}catch(e){throw localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),s(null),Error(e.response?.data?.detail||e.response?.data?.error?.message||"Login failed. Please check your credentials.")}},m=e=>t?.roles?.includes(e)??!1;return r.jsx(l.Provider,{value:{user:t,isLoading:c,isAuthenticated:!!t,login:u,logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),s(null),p.push("/en/login")},hasRole:m,hasAnyRole:e=>e.some(e=>m(e))},children:e})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function p(e){let{hasAnyRole:t}=d();return t(e)}let u={ADMIN:"admin",PRACTITIONER:"practitioner",RECEPTION:"reception",MARKETING:"marketing",ACCOUNTING:"accounting"}},3185:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>l});var r=s(326),a=s(2852),n=s(4976),i=s(7577),o=s(8853);function l({children:e}){let[t]=(0,i.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,retry:1,refetchOnWindowFocus:!1}}}));return r.jsx(n.aH,{client:t,children:r.jsx(o.Ho,{children:e})})}},9526:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(107).Z)(async({locale:e})=>({messages:(await s(7713)(`./${e}.json`)).default}))},4223:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(9510),a=s(3186),n=s(5031);let i=(0,s(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/lib/providers.tsx#Providers`);async function o({children:e,params:{locale:t}}){let s=await (0,n.Z)();return r.jsx("html",{lang:t,children:r.jsx("body",{children:r.jsx(i,{children:r.jsx(a.Z,{messages:s,children:e})})})})}s(9414)},4613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/social/page.tsx#default`)},9414:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,49,452,844],()=>s(4603));module.exports=r})();