(()=>{var e={};e.id=221,e.ids=[221],e.modules={7713:(e,t,r)=>{var s={"./en.json":[9316,316],"./es.json":[5671,671],"./fr.json":[7913,913],"./hy.json":[1028,28],"./ru.json":[375,375],"./uk.json":[7306,306]};function o(e){if(!r.o(s,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],o=t[0];return r.e(t[1]).then(()=>r.t(o,19))}o.keys=()=>Object.keys(s),o.id=7713,e.exports=o},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5942:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,originalPathname:()=>p,pages:()=>u,routeModule:()=>h,tree:()=>c}),r(6818),r(4223),r(5866);var s=r(3191),o=r(8716),a=r(7922),i=r.n(a),n=r(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["[locale]",{children:["debug",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6818)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/debug/auth/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4223)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/debug/auth/page.tsx"],p="/[locale]/debug/auth/page",d={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/[locale]/debug/auth/page",pathname:"/[locale]/debug/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3629:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},234:(e,t,r)=>{Promise.resolve().then(r.bind(r,3170)),Promise.resolve().then(r.bind(r,3185))},5655:(e,t,r)=>{Promise.resolve().then(r.bind(r,9622))},9622:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(326),o=r(8853);r(5154),r(3002);var a=r(7577);function i(){let{user:e,isLoading:t,isAuthenticated:r}=(0,o.aC)(),[i,n]=(0,a.useState)("");return s.jsx("div",{className:"p-8",children:"This page is only available in development mode."})}},3002:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a});var s=r(4464);r(5154);let o=s.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},timeout:3e4});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{let t=e.config;return e.response?.status===401&&t._retry,Promise.reject(e)});let a=o},5154:(e,t,r)=>{"use strict";r.d(t,{q:()=>s});let s={AUTH:{TOKEN:"/api/auth/token/",REFRESH:"/api/auth/token/refresh/",ME:"/api/auth/me/"},CLINICAL:{APPOINTMENTS:"/api/v1/clinical/appointments/",PATIENTS:"/api/v1/clinical/patients/",ENCOUNTERS:"/api/v1/clinical/encounters/",TREATMENTS:"/api/v1/clinical/treatments/",PROPOSALS:"/api/v1/clinical/proposals/"},POS:{SALES:"/api/v1/pos/sales/"}}},8853:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>c,K$:()=>d,aC:()=>u,p5:()=>p});var s=r(326),o=r(7577),a=r(5047),i=r(3002),n=r(5154);let l=(0,o.createContext)(void 0);function c({children:e}){let[t,r]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),p=(0,a.useRouter)(),d=async(e,t)=>{try{let{access:s,refresh:o}=(await i.ZP.post(n.q.AUTH.TOKEN,{email:e,password:t})).data;if(!s||!o)throw Error("Invalid token response from server");localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",o);let a=(await i.ZP.get(n.q.AUTH.ME)).data;localStorage.setItem("user",JSON.stringify(a)),r(a)}catch(e){throw localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),r(null),Error(e.response?.data?.detail||e.response?.data?.error?.message||"Login failed. Please check your credentials.")}},h=e=>t?.roles?.includes(e)??!1;return s.jsx(l.Provider,{value:{user:t,isLoading:c,isAuthenticated:!!t,login:d,logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),r(null),p.push("/en/login")},hasRole:h,hasAnyRole:e=>e.some(e=>h(e))},children:e})}function u(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function p(e){let{hasAnyRole:t}=u();return t(e)}let d={ADMIN:"admin",PRACTITIONER:"practitioner",RECEPTION:"reception",MARKETING:"marketing",ACCOUNTING:"accounting"}},3185:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>l});var s=r(326),o=r(2852),a=r(4976),i=r(7577),n=r(8853);function l({children:e}){let[t]=(0,i.useState)(()=>new o.S({defaultOptions:{queries:{staleTime:6e4,retry:1,refetchOnWindowFocus:!1}}}));return s.jsx(a.aH,{client:t,children:s.jsx(n.Ho,{children:e})})}},9526:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(107).Z)(async({locale:e})=>({messages:(await r(7713)(`./${e}.json`)).default}))},6818:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/debug/auth/page.tsx#default`)},4223:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9510),o=r(3186),a=r(5031);let i=(0,r(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/lib/providers.tsx#Providers`);async function n({children:e,params:{locale:t}}){let r=await (0,a.Z)();return s.jsx("html",{lang:t,children:s.jsx("body",{children:s.jsx(i,{children:s.jsx(o.Z,{messages:r,children:e})})})})}r(9414)},9414:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,49,452],()=>r(5942));module.exports=s})();