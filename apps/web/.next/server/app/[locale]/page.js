(()=>{var e={};e.id=61,e.ids=[61],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},199:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(5875),s(4223),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["[locale]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5875)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4223)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/page.tsx"],p="/[locale]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[locale]/page",pathname:"/[locale]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4531:(e,t,s)=>{Promise.resolve().then(s.bind(s,1414))},1414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(326),a=s(3071);function i({isLoading:e,error:t,isEmpty:s=!1,emptyMessage:a="No data available",emptyDescription:i,emptyAction:n,loadingMessage:l="Loading...",errorTitle:o,errorDescription:d,errorMessage:c,children:p}){return e?r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:r.jsx("div",{style:{fontSize:"16px",color:"var(--gray-600)"},children:l})})}):t?r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"⚠️"}),r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px",color:"var(--error)"},children:o||c||"Error"}),d&&r.jsx("p",{style:{color:"var(--gray-600)",fontSize:"14px",maxWidth:"400px",margin:"0 auto"},children:d})]})}):s?r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",style:{textAlign:"center",padding:"48px 20px"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"\uD83D\uDCCB"}),r.jsx("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px"},children:a}),i&&r.jsx("p",{style:{color:"var(--gray-600)",marginBottom:"24px",fontSize:"14px"},children:i}),n&&r.jsx("button",{onClick:n.onClick,className:"btn-primary",disabled:!n.onClick,children:n.label})]})}):r.jsx(r.Fragment,{children:p})}var n=s(108),l=s(4976),o=s(119),d=s(3002),c=s(5154);let p={all:["appointments"],lists:()=>[...p.all,"list"],list:e=>[...p.lists(),e],details:()=>[...p.all,"detail"],detail:e=>[...p.details(),e]};var u=s(7577),x=s(3844),m=s(5047);function h(){return new Date().toISOString().split("T")[0]}function y(e){return!e||isNaN(new Date(e+"T00:00:00").getTime())?null:e}function g(e,t){let s=new Date(e+"T00:00:00");return s.setDate(s.getDate()+t),s.toISOString().split("T")[0]}function j(){var e;let t=(0,x.useTranslations)("agenda"),s=(0,x.useTranslations)("common"),j=(0,x.useLocale)(),b=(0,m.useRouter)(),v=(0,m.useSearchParams)(),f=(0,u.useRef)(!1),[N,P]=(0,u.useState)(()=>{let e=v.get("date");return f.current=!0,y(e)||h()}),[S,_]=(0,u.useState)(v.get("status")||""),{data:q,isLoading:C,error:D}=(e={date_from:N,date_to:N,status:S||void 0},(0,n.a)({queryKey:p.list(e||{}),queryFn:async()=>{try{return(await d.ZP.get(c.q.CLINICAL.APPOINTMENTS,{params:e})).data}catch(e){throw e}}})),k=function(){let e=(0,l.NL)();return(0,o.D)({mutationFn:async({id:e,status:t})=>(await d.ZP.patch(`${c.q.CLINICAL.APPOINTMENTS}${e}/`,{status:t})).data,onSuccess:(t,s)=>{e.invalidateQueries({queryKey:p.lists()}),e.invalidateQueries({queryKey:p.detail(s.id)})}})}(),w=(0,u.useMemo)(()=>q?.results||[],[q]),I=0===w.length,T=(e,t)=>{k.mutate({id:e,status:t})};(0,u.useMemo)(()=>new Intl.DateTimeFormat(j,{year:"numeric",month:"long",day:"numeric"}),[j]);let A=(0,u.useMemo)(()=>new Intl.DateTimeFormat(j,{hour:"2-digit",minute:"2-digit"}),[j]);return r.jsx(a.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{children:t("title")}),r.jsx("p",{className:"page-description",children:t("description")})]}),r.jsx("button",{onClick:()=>b.push(`/${j}/schedule`),className:"btn-primary",style:{whiteSpace:"nowrap"},children:t("actions.newAppointment")})]}),r.jsx("div",{className:"card",style:{marginBottom:"16px",padding:"12px"},children:(0,r.jsxs)("div",{className:"flex gap-2",style:{alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{className:"flex gap-2",style:{alignItems:"center"},children:[r.jsx("button",{onClick:e=>{e.preventDefault(),P(e=>g(e,-1))},className:"btn-secondary btn-sm","aria-label":t("filters.previousDay")||"Previous day",title:t("filters.previousDay")||"Previous day",type:"button",children:"←"}),r.jsx("input",{type:"date",value:N,onChange:e=>{let t=y(e.target.value);t&&t!==N&&P(t)},className:"form-group",style:{marginBottom:0,width:"auto",padding:"8px 12px",minWidth:"160px"},"aria-label":t("filters.date")}),r.jsx("button",{onClick:e=>{e.preventDefault(),P(e=>g(e,1))},className:"btn-secondary btn-sm","aria-label":t("filters.nextDay")||"Next day",title:t("filters.nextDay")||"Next day",type:"button",children:"→"}),N!==h()&&r.jsx("button",{onClick:()=>P(h()),className:"btn-secondary btn-sm",style:{fontSize:"13px"},children:t("filters.today")||"Today"})]}),(0,r.jsxs)("select",{value:S,onChange:e=>_(e.target.value),style:{padding:"8px 12px",border:"1px solid var(--gray-300)",borderRadius:"6px"},"aria-label":t("filters.status"),children:[r.jsx("option",{value:"",children:t("filters.allStatuses")}),r.jsx("option",{value:"scheduled",children:t("appointment.status.scheduled")}),r.jsx("option",{value:"confirmed",children:t("appointment.status.confirmed")}),r.jsx("option",{value:"checked_in",children:t("appointment.status.checked_in")}),r.jsx("option",{value:"completed",children:t("appointment.status.completed")}),r.jsx("option",{value:"cancelled",children:t("appointment.status.cancelled")}),r.jsx("option",{value:"no_show",children:t("appointment.status.no_show")})]})]})}),(0,r.jsxs)(i,{isLoading:C,error:D,isEmpty:I,emptyMessage:t("emptyState.title"),emptyDescription:t("emptyState.description"),emptyAction:{label:t("emptyState.action"),onClick:void 0},loadingMessage:s("loading"),errorTitle:t("errors.title"),errorDescription:t("errors.description"),children:[r.jsx("div",{className:"card",children:(0,r.jsxs)("table",{className:"table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:t("table.time")}),r.jsx("th",{children:t("table.patient")}),r.jsx("th",{children:t("table.practitioner")}),r.jsx("th",{children:t("table.type")}),r.jsx("th",{children:t("table.status")}),r.jsx("th",{children:t("table.actions")})]})}),r.jsx("tbody",{children:w.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[r.jsx("div",{style:{fontWeight:500},children:A.format(new Date(e.scheduled_start))}),e.scheduled_end&&r.jsx("div",{style:{fontSize:"12px",color:"var(--gray-600)"},children:A.format(new Date(e.scheduled_end))})]}),(0,r.jsxs)("td",{children:[r.jsx("div",{style:{fontWeight:500},children:e.patient.full_name}),r.jsx("div",{style:{fontSize:"12px",color:"var(--gray-600)"},children:e.patient.email||e.patient.phone||"—"})]}),r.jsx("td",{children:e.practitioner?.display_name||"—"}),r.jsx("td",{children:r.jsx("span",{style:{fontSize:"13px",color:"var(--gray-700)"},children:e.source})}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-${e.status}`,children:t(`appointment.status.${e.status}`)})}),r.jsx("td",{children:(0,r.jsxs)("div",{className:"flex gap-2",children:["scheduled"===e.status&&r.jsx("button",{onClick:()=>T(e.id,"confirmed"),className:"btn-secondary btn-sm",disabled:k.isPending,children:t("actions.confirm")}),"confirmed"===e.status&&r.jsx("button",{onClick:()=>T(e.id,"checked_in"),className:"btn-primary btn-sm",disabled:k.isPending,children:t("actions.checkIn")}),"checked_in"===e.status&&r.jsx("button",{onClick:()=>T(e.id,"completed"),className:"btn-primary btn-sm",disabled:k.isPending,children:t("actions.complete")}),("scheduled"===e.status||"confirmed"===e.status)&&r.jsx("button",{onClick:()=>T(e.id,"cancelled"),className:"btn-secondary btn-sm",disabled:k.isPending,style:{color:"var(--error)"},children:t("actions.cancel")})]})})]},e.id))})]})}),w.length>0&&(0,r.jsxs)("div",{style:{marginTop:"16px",fontSize:"14px",color:"var(--gray-600)"},children:[t("summary.totalAppointments"),": ",w.length]})]})]})})}},5875:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,49,452,844,434,463,80],()=>s(199));module.exports=r})();