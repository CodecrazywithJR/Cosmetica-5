(()=>{var e={};e.id=657,e.ids=[657],e.modules={7713:(e,s,t)=>{var a={"./en.json":[9316,316],"./es.json":[5671,671],"./fr.json":[7913,913],"./hy.json":[1028,28],"./ru.json":[375,375],"./uk.json":[7306,306]};function r(e){if(!t.o(a,e))return Promise.resolve().then(()=>{var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s});var s=a[e],r=s[0];return t.e(s[1]).then(()=>t.t(r,19))}r.keys=()=>Object.keys(a),r.id=7713,e.exports=r},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4082:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(23),t(4223),t(5866);var a=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["[locale]",{children:["maintenance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,23)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/maintenance/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4223)),"/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/maintenance/page.tsx"],m="/[locale]/maintenance/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/[locale]/maintenance/page",pathname:"/[locale]/maintenance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3629:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},234:(e,s,t)=>{Promise.resolve().then(t.bind(t,3170)),Promise.resolve().then(t.bind(t,3185))},9613:(e,s,t)=>{Promise.resolve().then(t.bind(t,9385))},9385:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(326),r=t(7577),i=t(3844),n=t(3002);async function l(){return(await n.ZP.get("/ops/diagnostics")).data}function c(){(0,i.useTranslations)();let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(null),x=async()=>{try{n(!0),d(null);let e=await l();s(e),m(new Date)}catch(e){console.error("Error loading diagnostics:",e),d(e.response?.data?.detail||"Failed to load diagnostics")}finally{n(!1)}};if(t&&!e)return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"System Maintenance"}),a.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:a.jsx("p",{className:"text-gray-600",children:"Loading diagnostics..."})})]})});if(c)return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"System Maintenance"}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[a.jsx("p",{className:"text-red-800 font-semibold",children:"Error loading diagnostics"}),a.jsx("p",{className:"text-red-600 mt-2",children:c}),a.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]})]})});if(!e)return null;let h=e=>{let s="px-3 py-1 rounded-full text-sm font-semibold";return"healthy"===e||"ok"===e||"active"===e?`${s} bg-green-100 text-green-800`:"degraded"===e||"warning"===e?`${s} bg-yellow-100 text-yellow-800`:`${s} bg-red-100 text-red-800`};return a.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"System Maintenance"}),o&&(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Last updated: ",o.toLocaleTimeString()]})]}),a.jsx("button",{onClick:x,disabled:t,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:t?"Refreshing...":"Refresh Now"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Service Health"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.services.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"font-semibold",children:e.name}),a.jsx("span",{className:h(e.status),children:e.status})]}),e.details&&a.jsx("div",{className:"mt-2 text-sm text-gray-600",children:Object.entries(e.details).map(([e,s])=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[e,":"]})," ",String(s)]},e))})]},e.name))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Disk Space"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Usage"}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.disk_space.percent,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:`h-3 rounded-full ${e.disk_space.percent>90?"bg-red-600":e.disk_space.percent>75?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e.disk_space.percent}%`}})})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total:"}),a.jsx("span",{className:"font-medium",children:e.disk_space.total})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Used:"}),a.jsx("span",{className:"font-medium",children:e.disk_space.used})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Free:"}),a.jsx("span",{className:"font-medium",children:e.disk_space.free})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Database Connections"})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Total:"}),a.jsx("span",{className:"text-2xl font-bold",children:e.database.total_connections})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Active:"}),a.jsx("span",{className:"text-xl font-semibold text-green-600",children:e.database.active_connections})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Idle:"}),a.jsx("span",{className:"text-xl font-semibold text-gray-500",children:e.database.idle_connections})]})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Redis Cache"})}),(0,a.jsxs)("div",{className:"p-6 space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Connected Clients:"}),a.jsx("span",{className:"font-medium",children:e.redis.connected_clients})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Memory Used:"}),a.jsx("span",{className:"font-medium",children:e.redis.used_memory})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Peak Memory:"}),a.jsx("span",{className:"font-medium",children:e.redis.used_memory_peak})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Uptime:"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.redis.uptime_days," days"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Celery Workers"})}),a.jsx("div",{className:"p-6",children:e.celery_workers.map((e,s)=>(0,a.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:e.hostname}),a.jsx("span",{className:h(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Active:"})," ",a.jsx("span",{className:"font-medium",children:e.active_tasks})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Processed:"})," ",a.jsx("span",{className:"font-medium",children:e.processed_tasks})]})]})]},s))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"MinIO Storage Buckets"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.minio_buckets.map(e=>(0,a.jsxs)("div",{className:`border rounded-lg p-4 ${e.accessible?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold",children:e.name}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${e.accessible?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:e.accessible?"Accessible":"Not Accessible"})]}),e.accessible&&a.jsx("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("p",{children:["Objects: ",e.object_count??"N/A"]})})]},e.name))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Quick Actions"})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{className:"bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 disabled:opacity-50",disabled:!0,children:["Clear Cache",a.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Coming soon"})]}),(0,a.jsxs)("button",{className:"bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 disabled:opacity-50",disabled:!0,children:["View Logs",a.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Coming soon"})]}),(0,a.jsxs)("button",{className:"bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 disabled:opacity-50",disabled:!0,children:["Restart Services",a.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Coming soon"})]})]})})]})]})})}},3002:(e,s,t)=>{"use strict";t.d(s,{ZP:()=>i});var a=t(4464);t(5154);let r=a.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},timeout:3e4});r.interceptors.request.use(e=>e,e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{let s=e.config;return e.response?.status===401&&s._retry,Promise.reject(e)});let i=r},5154:(e,s,t)=>{"use strict";t.d(s,{q:()=>a});let a={AUTH:{TOKEN:"/api/auth/token/",REFRESH:"/api/auth/token/refresh/",ME:"/api/auth/me/"},CLINICAL:{APPOINTMENTS:"/api/v1/clinical/appointments/",PATIENTS:"/api/v1/clinical/patients/",ENCOUNTERS:"/api/v1/clinical/encounters/",TREATMENTS:"/api/v1/clinical/treatments/",PROPOSALS:"/api/v1/clinical/proposals/"},POS:{SALES:"/api/v1/pos/sales/"}}},8853:(e,s,t)=>{"use strict";t.d(s,{Ho:()=>d,K$:()=>x,aC:()=>o,p5:()=>m});var a=t(326),r=t(7577),i=t(5047),n=t(3002),l=t(5154);let c=(0,r.createContext)(void 0);function d({children:e}){let[s,t]=(0,r.useState)(null),[d,o]=(0,r.useState)(!0),m=(0,i.useRouter)(),x=async(e,s)=>{try{let{access:a,refresh:r}=(await n.ZP.post(l.q.AUTH.TOKEN,{email:e,password:s})).data;if(!a||!r)throw Error("Invalid token response from server");localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",r);let i=(await n.ZP.get(l.q.AUTH.ME)).data;localStorage.setItem("user",JSON.stringify(i)),t(i)}catch(e){throw localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),t(null),Error(e.response?.data?.detail||e.response?.data?.error?.message||"Login failed. Please check your credentials.")}},h=e=>s?.roles?.includes(e)??!1;return a.jsx(c.Provider,{value:{user:s,isLoading:d,isAuthenticated:!!s,login:x,logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),t(null),m.push("/en/login")},hasRole:h,hasAnyRole:e=>e.some(e=>h(e))},children:e})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function m(e){let{hasAnyRole:s}=o();return s(e)}let x={ADMIN:"admin",PRACTITIONER:"practitioner",RECEPTION:"reception",MARKETING:"marketing",ACCOUNTING:"accounting"}},3185:(e,s,t)=>{"use strict";t.d(s,{Providers:()=>c});var a=t(326),r=t(2852),i=t(4976),n=t(7577),l=t(8853);function c({children:e}){let[s]=(0,n.useState)(()=>new r.S({defaultOptions:{queries:{staleTime:6e4,retry:1,refetchOnWindowFocus:!1}}}));return a.jsx(i.aH,{client:s,children:a.jsx(l.Ho,{children:e})})}},9526:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(107).Z)(async({locale:e})=>({messages:(await t(7713)(`./${e}.json`)).default}))},4223:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(9510),r=t(3186),i=t(5031);let n=(0,t(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/lib/providers.tsx#Providers`);async function l({children:e,params:{locale:s}}){let t=await (0,i.Z)();return a.jsx("html",{lang:s,children:a.jsx("body",{children:a.jsx(n,{children:a.jsx(r.Z,{messages:t,children:e})})})})}t(9414)},23:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/josericardoparlonsebastian/Desktop/Ideas/Cosmetica 5/apps/web/src/app/[locale]/maintenance/page.tsx#default`)},9414:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,49,452,844],()=>t(4082));module.exports=a})();